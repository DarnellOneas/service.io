<!DOCTYPE html>
<html>
<head>
    <title>Набросок сайта</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    <!-- <script type="module" src="firebase_connect.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery.maskedinput@1.4.1/src/jquery.maskedinput.js" type="text/javascript"></script>



    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyBHzBe6VKhxf-3dzCxOo5Jo-hfSF-4ndkU",
          authDomain: "komissarpro.firebaseapp.com",
          databaseURL: "https://komissarpro-default-rtdb.europe-west1.firebasedatabase.app",
          projectId: "komissarpro",
          storageBucket: "komissarpro.appspot.com",
          messagingSenderId: "188298072153",
          appId: "1:188298072153:web:a30b371ae48b57aea8a148",
          measurementId: "G-R1D76YR5KN"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        const db = getFirestore(app);


// Функция для отправки данных в коллекцию site_requests
async function sendRequestData(name, phone, date) {

  const requestRef = collection(db, "site_requests");

  try {
    // Добавляем новый документ с данными
    const docRef = await addDoc(requestRef, {
      name: name,
      phone: phone,
      date: date,
    });

    console.log("Данные успешно отправлены в Cloud Firestore!");
    console.log("ID документа:", docRef.id);
  } catch (error) {
    console.error("Ошибка при отправке данных:", error);
  }
}

// Проверяем, не являются ли значения пустыми
function validateInputs() {
  const nameInput = document.getElementById("name");
  const phoneInput = document.getElementById("phone");

  if (nameInput.value === "") {
    console.log("Имя не может быть пустым!");
    return false;
  }

  if (phoneInput.value === "") {
    console.log("Телефон не может быть пустым!");
    return false;
  }

  return true;
}

// Добавляем проверку ошибок
document.getElementById("form").addEventListener("submit", function(event) {
  console.log("Отправляет")
  event.preventDefault(); // Отменяем отправку формы по умолчанию

  const nameInput = document.getElementById("name");
  const phoneInput = document.getElementById("phone");

  const name = nameInput.value;
  const phone = phoneInput.value;
  const date = new Date().toISOString();

  if (!validateInputs()) {
    return;
  }

  sendRequestData(name, phone, date);

  // Очищаем поля ввода после отправки
  nameInput.value = "";
  phoneInput.value = "";
});

      </script>
</head>
<body>
    <header class="collapsed">
        <nav>
                    <a href="#block1">Оставить заявку</a>
                    <a href="#block2">Аварийные комиссары</a>
                    <a href="#block3">Автострахование</a>
                    <a href="#block4">Что делать при ДТП</a>
                    <a href="#block5">О компании</a>
        </nav>
        
    </header>
    <button id="show-header">Показать шапку</button>
    <section id="block1">
        <h2>Оставить заявку на обратный звонок</h2>
        <form id="form">
            <label for="name">Ваше имя:</label>
            <input type="text" id="name" name="name"><br>
    
            <script src="js/jquery.maskedinput.min.js"></script>
    
            <label for="phone">Телефон:</label>
            <input type="text" id="phone" placeholder="Введите номер телефона" class="phone_mask">
            <script>
                $(".phone_mask").mask("+7(999)999-99-99");
            </script>
    
            <br>
            
            <button type="submit">Отправить</button>
        </form>
        <button>Быстрый звонок</button>
    </section>

    <section id="block2">
        <h2>Аварийные комиссары</h2>
        <p>Аварийные комиссары специализируются на работе с ДТП (дорожно-транспортными происшествиями). Они предоставляют помощь на месте происшествия, помогая определить виновника и установить степень его правовой ответственности. Кроме того, они оказывают содействие в сборе необходимых документов для подачи и рассмотрения страхового случая в страховой компании.

            🚗 Служба аварийных комиссаров предлагают следующие услуги:
            
            1️⃣ Выезд на место происшествия: Комиссары незамедлительно отправляются на место ДТП для осмотра автомобилей, фиксации и урегулирования обстоятельств и получения подробностей от участников.
            
            2️⃣ Определение виновника: Они проводят расследование для выяснения обстоятельств произошедшего и определения, кто является виновной стороной в ДТП.
            
            3️⃣ Сбор доказательств: Комиссары собирают все необходимые документы, свидетельства, фотографии и другие доказательства, подтверждающие версию событий, которые могут помочь в урегулировании страхового случая.
            
            4️⃣ Консультации и содействие: Аварийные комиссары предоставляют юридические консультации и содействуют в вопросах, связанных с страховым процессом, помогая клиентам осознанно и эффективно защитить свои права.
            
            Цель аварийных комиссаров - помочь пострадавшим от ДТП в решении проблем, связанных с определением виновной стороны, сбором доказательств и оформлением страхового случая. 🚓💼📄</p>
    </section>

    <section id="block3">
        <h2>Автострахование</h2>
        <p>🚗💥 Автострахование - это процесс защиты вашего автомобиля от возможных рисков и несчастных случаев на дороге. Мы - эксперты в этой области и сотрудничаем со всеми ведущими страховыми компаниями, чтобы помочь вам подобрать самые выгодные условия для вашего автострахования.


            💻📞 Если вы предпочитаете удобство онлайн-оформления, вы можете сами оформить страховой полис на нашем сайте. Наш сотрудник будет руководить вас через весь процесс, чтобы убедиться, что вы правильно заполнили все необходимые поля и сделали оптимальный выбор.
            
            📊🤝 Нашей целью является обеспечение вашей безопасности на дороге и не только, защита всех ваших интересов в случае возникновения непредвиденных ситуаций.</p>
    </section>

    <section id="block4">
        <h2>Что делать при ДТП</h2>
        <p>🚗💥😟 О, нет! ДТП - серьезная ситуация. Вот несколько шагов, которые рекомендуется выполнить:

            1️⃣ Обеспечьте безопасность: Если возможно, переместите автомобили с дороги, чтобы не создавать помеху движению других автомобилей. Включите аварийные сигналы и убедитесь, что вы и другие участники ДТП в безопасности.
            
            2️⃣ Позвоните в полицию или скорую помощь, если есть пострадавшие или значительный материальный ущерб. При необходимости следуйте указаниям оператора службы экстренной помощи.
            
            3️⃣ Обменивайтесь информацией: Соберите данные обо всех участниках ДТП, включая имена, контактные номера телефонов, номера автомобилей и страховую информацию. Если есть свидетели, попросите их оставить свои контактные данные.
            
            4️⃣ Документируйте происшествие: Сфотографируйте повреждения автомобилей, а также окружение места ДТП. Запишите свидетельства и составьте свой собственный письменный отчёт о произошедшем.
            
            5️⃣ Следуйте инструкциям: Сотрудничайте с полицией и страховыми компаниями, следуя их инструкциям и предоставляя необходимую информацию.
            
            🚦👮‍♀️🚑 Запомните, правила и процедуры могут различаться в зависимости от страны и юрисдикции. Всегда следуйте дорожным правилам и соблюдайте указания полиции.</p>
    </section>

    <section id="block5">
        <h2>О компании</h2>
        <p>Описание блока 5</p>
    </section>

    <footer>
        <ul>
            <li>Телефон 1: +7 (991) 089-00-89</li>
            <!-- <li>Телефон 2: +0987654321</li> -->
        </ul>
    </footer>
</body>
</html>